<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ESP32 Management AP</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body onLoad="getStatus()">
    <div class="container">
        <h2 class="centered">ESP32 Wi-Fi Pentest</h2>

        <div class="msg warning" id="errors" class="hidden">
        </div>

        <section id="setup" class="hidden">
            <form onSubmit="runAttack(); return false;">
                <fieldset>
                    <legend>Select Target</legend>
                    <div id="ap-loader" class="centered">
                        <div class="lds-dual-ring"></div>
                    </div>
                    <table id="ap-list" class="table">
                    </table>
                    <p>
                        <button type="button" onClick="fetchAps()" class="btn btn-a btn-sm smooth">Scan</button>
                    </p>
                </fieldset>
                <fieldset>
                    <legend>Attack Configuration</legend>
                    <p>
                        <label for="attack_type">Type:</label>
                        <select id="attack_type" onChange="updateConfigurableFields(this)" required>
                            <option value="0" title="This type is not implemented yet." disabled>ATTACK_TYPE_PASSIVE
                            </option>
                            <option value="1">ATTACK_TYPE_HANDSHAKE</option>
                            <option value="2" selected>ATTACK_TYPE_PMKID</option>
                            <option value="3">ATTACK_TYPE_DOS</option>
                        </select>
                    </p>
                    <p>
                        <label for="attack_method">Method:</label>
                        <select id="attack_method" required disabled>
                            <option value="" selected disabled hidden>NOT AVAILABLE</option>
                        </select>
                    </p>
                    <p>
                        <label for="attack_timeout">Timeout (seconds):</label>
                        <input type="number" min="0" max="255" id="attack_timeout" value="" required />
                    </p>
                    <p>
                        <button class="btn btn-c btn-sm smooth">Attack</button>
                    </p>
                </fieldset>
            </form>
        </section>

        <section id="running" class="hidden">
            Time elapsed: <span id="running-progress"></span>
        </section>

        <section id="results" class="hidden">
            <div id="result-meta">Loading result.. Please wait</div>
            <div id="result-content"></div>
            <button type="button" onClick="resetAttack()">New attack</button>
        </section>
    </div>
    <script src="script.js"></script>
</body>

</html>